<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <div class="container">
      <div class="d-flex justify-content-center text-center">
        <div class="row b_size justify-content-center">
          <h4 class="my-4">{{ person }}의 프로필</h4>
          <hr />
          <h6 class="my-4">캠핑가조의 많은 회원님들을 만나보세요.</h6>

          <div class="d-flex justify-content-center">
            {% if user.image %}
            <img
              class="p-1 rounded-circle"
              src="{{ user.image.url }}"
              alt="image"
              style="width: 200px"
            />
            {% comment %} {% else %}
            <img
              class="p-1 rounded-circle"
              src="{% static 'img/blank-profile-image.png' %}"
              class="img-fluid"
              style="width: 70px; height: 70px"
              alt="blank-profile-image"
              style="width: 200px"
            />
            {% endcomment %} {% endif %}
          </div>

          {% if request.user != person %}
          <form action="{% url 'accounts:follow' person.pk %}" method="post">
            {% csrf_token %} {% if request.user in person.followers.all %}
            <input
              class="mt-3 btn btn-primary"
              type="submit"
              value="팔로우 취소"
            />
            {% else %}
            <input
              class="mt-3 btn btn-outline-primary"
              type="submit"
              value="팔로우"
            />
            {% endif %}
          </form>
          {% endif %}

          <div class="my-2">
            팔로잉 : {{ person.followings.all|length }} / 팔로워 : {{ person.followers.all|length }}
          </div>
          <div class="px-3 py-1">
            <button
              class="btn btn-outline-primary"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#followings"
              aria-expanded="false"
              aria-controls="followings"
            >
              팔로잉 목록
            </button>
          </div>

          <div class="collapse justify-content-center" id="followings">
            {% for following in person.followings.all %}
            <a href="{% url 'accounts:profile' following.username %}"
              >{{ following.username }}</a
            >
            {% endfor %}
          </div>

          <div class="px-3 py-1">
            <button
              class="btn btn-outline-primary"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#followers"
              aria-expanded="false"
              aria-controls="followers"
            >
              팔로워 목록
            </button>
          </div>

          <div class="collapse justify-content-center" id="followers">
            {% for follower in person.followers.all %}
            <a href="{% url 'accounts:profile' follower.username %}"
              >{{ follower.username }}</a
            >
            {% endfor %}
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
